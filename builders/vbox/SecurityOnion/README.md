# Security Onion VirtualBox Builds

## List of builds

 - **security-onion-base.virtualbox-iso.base**: The base installation with none of the tools intalled on top of it
 - **so-eval.virtualbox-ovf.eval**: An evaluation install. This includes just enough to show off capabilities, but is not meant as a production system
 - **security-onion-standalone.virtualbox-ovf.so-standalone**: A complete standalone system (manager + sensor + search all-in-one). Meant for small networks only, does not scale well
 - **security-onion-mgr-sch.virtualbox-ovf.so-mgr-sch**: A combined manager-search build meant for distributed systems

## Base Install

To build just the base, run:

`packer build -only security-onion-base.virtualbox-iso.base packer`

This will generate an OVF with a relatively standard CentOS installation. It is the equivalent of starting the SecurityOnion iso and just going through the first part of the installation (until the first reboot)

## Other Installs

These all build off of the OVF generated by the base install, so even if you are building just one of these you will have to have run the base at least once. Having the base installation prevents having to do the same thing over again for each of the builds.

## Customizing/Changing settings

The settings I have set up will most likely not be sufficient for production. To change things like networking setup and credentials, you'll have to change the settings in the scripts: `scripts/ucwt-*-iso` depending on the version you're installing

### Important things to change per environment

Before you build, there's a few important things you will need to consider changing.

#### NIC names

By default the NICs are enp0s3 and enp0s8.
If your hypervisor presents the NICs to the VM differently, these may change.
In the `ucwt-*-iso` scripts, the variable `MNIC` is the management NIC and `BNICS` is a list of monitor NICS.
MNIC should be routable, and anything in BNICS should not (i.e. `ip route` should not have any entries that go through BNIC).
I recommend leaving any BNICs "unplugged" via the hypervisor to prevent them from accidentally getting configured by DHCP.

#### Hostnames

If you install more than one of the same type of node on a network (for example, two sensors), they'll both be configured to have the same hostname. You should change this so they have unique hostnames.
